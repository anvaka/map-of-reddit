(function(e){function t(t){for(var i,a,s=t[0],c=t[1],u=t[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},r=[];function a(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-9475eac2":"1e9ebc1b"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(e);var u=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,n[1](u)}o[e]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2153:function(e,t,n){},"354a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=(n("99af"),n("fb6a"),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.isWebGLEnabled?e._e():t("div",[e._m(0)]),e.isWebGLEnabled?t("div",[t("transition",{attrs:{name:"fade"}},[e.progressMessage?t("div",{staticClass:"progress"},[e._v(e._s(e.progressMessage))]):e._e()]),t("transition",{attrs:{name:"fade"}},[e.subgraphName&&!e.isStreetViewMode?t("div",{staticClass:"progress subgraph"},[e._v(" Only "),t("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onSubgraphRootClick.apply(null,arguments)}}},[e._v("/r/"+e._s(e.subgraphName))]),e._v(" related subreddits are shown. "),t("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onExitSubgraph.apply(null,arguments)}}},[e._v("view all")])]):e._e()]),t("transition",{attrs:{name:"fade"}},[e.isStreetViewMode&&!e.isStreetViewInProgress?t("div",{staticClass:"progress subgraph"},[t("a",{staticClass:"accent",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onExitStreetView.apply(null,arguments)}}},[e._v("exit street view")])]):e._e()]),e.subreddit?t("subreddit",{staticClass:"preview",attrs:{name:e.subreddit,sort:e.defaultSort,time:e.defaultTime},on:{declineAge:e.onDeclineAge}},[t("template",{slot:"after-title"},[t("div",[e.graphLoaded?t("a",{staticClass:"subreddit-action",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showRelated.apply(null,arguments)}}},[e._v("Show related")]):e._e(),e.streetViewEnabled&&e.graphLoaded&&!e.isSubgraphLayoutInProgress?t("a",{staticClass:"subreddit-action",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showStreetView.apply(null,arguments)}}},[e._v("Street view")]):e._e(),e.graphLoaded?t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.multiView,expression:"multiView"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.multiView)?e._i(e.multiView,null)>-1:e.multiView},on:{change:function(t){var n=e.multiView,i=t.target,o=!!i.checked;if(Array.isArray(n)){var r=null,a=e._i(n,r);i.checked?a<0&&(e.multiView=n.concat([r])):a>-1&&(e.multiView=n.slice(0,a).concat(n.slice(a+1)))}else e.multiView=o}}}),t("label",{attrs:{for:"checkbox"}},[e._v("Multireddit view from neighbors")])]):e._e(),e.graphLoaded?e._e():t("span",{staticClass:"subreddit-action"},[e._v("the map is still loading...")])])])],2):e._e(),t("form",{staticClass:"search-box",on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("typeahead",{attrs:{placeholder:"Find subreddit",showClearButton:e.subreddit,query:e.appState.query},on:{menuClicked:function(t){e.sidebarVisible=!0},selected:e.findSubreddit,beforeClear:e.closeSubredditOnSmallScreen,cleared:e.closeSubredditViewer,inputChanged:e.onTypeAheadInput}})],1),e.graphLoaded&&null===e.progressMessage?t("div",{staticClass:"support",class:{subgraph:e.subgraphName&&!e.isStreetViewMode,street:e.isStreetViewMode}},[e._v(" Enjoying this map? "),t("br"),t("a",{staticClass:"accent",attrs:{href:"https://www.paypal.com/paypalme/anvakos/5",target:"_blank"}},[e._v("Support the author")])]):e._e(),t("a",{staticClass:"accent improve",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onImproveClick.apply(null,arguments)}}},[e._v("Improve this map")]),t("transition",{attrs:{name:"slide-bottom"}},[e.smallPreview?t("small-preview",{staticClass:"small-preview",attrs:{name:e.smallPreview}}):e._e()],1),t("transition",{attrs:{name:"slide-top"}},[e.improveVisible?t("improve-window",{staticClass:"improve-window",on:{close:function(t){e.improveVisible=!1}}}):e._e()],1),e.tooltip?t("tooltip",{staticClass:"tooltip",style:{left:e.tooltip.x+"px",top:e.tooltip.y+"px"},attrs:{data:e.tooltip}}):e._e(),t("transition",{attrs:{name:"fade"}},[e.sidebarVisible||e.improveVisible?t("div",{staticClass:"backdrop",on:{click:e.onBackdropClick}}):e._e()]),t("transition",{attrs:{name:"slide-left"}},[e.sidebarVisible?t("sidebar",{on:{close:function(t){e.sidebarVisible=!1}}}):e._e()],1)],1):e._e()])}),r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute no-webgl"},[t("h4",[e._v("WebGL is not enabled :(")]),t("p",[e._v("This website needs "),t("a",{staticClass:"accent",attrs:{href:"https://en.wikipedia.org/wiki/WebGL"}},[e._v("WebGL")]),e._v(" to render a map of reddit. ")]),e._v(" "),t("p",[e._v(" You can try another browser. If the problem persists - very likely your video card isn't supported. ")])])}],a=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("a15b"),n("b0c0"),n("d81d"),n("498a"),n("e6b8"),n("3835")),s=n("5530"),c=(n("159b"),n("6062"),n("a630"),n("4de4"),n("c35a"),n("a9e3"),n("ac1f"),n("466d"),n("f00c"),n("9aeb")),u=(n("ace4"),n("5cc6"),n("acef"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("fa9e"),n("77d9"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("2b3d"),n("9861"),n("25f0"),n("00c7")),d=n.n(u),l=n("148d"),h=n.n(l),f=n("1a2d"),p=d()({}),v=p;function m(e){p.fire("progress",e())}n("5319");function g(e,t,n){var i,o=new Date;return function(){var r=new Date,a=r-o;if(clearTimeout(i),a>t)e.apply(n,arguments);else{o=r;var s=arguments;i=setTimeout((function(){e.apply(n,s)}),t)}}}function w(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function b(e){var t=!1,n=h()(),i=Object(f["createStreamingSVGParser"])(s,c,!0),o=d()({load:a,dispose:r,getGraph:function(){return n}});return o;function r(){t=!0}function a(){var r=window.performance.now();function a(){return{message:"Loaded "+w(n.getLinkCount())+" relationship records"}}function s(t){if(e.indexOf("http")<0)return t;var n=new URL(e);return n.pathname=n.pathname.substr(0,n.pathname.lastIndexOf("/")+1)+t,n.toString()}return fetch(e,{mode:"cors"}).then((function(e){var n=e.body.getReader(),o=new TextDecoder;return n.read().then(r);function r(e){if(!t){var a=void 0!==e.value&&o.decode(e.value,{stream:!e.done})||"";return i(a).then((function(){if(!e.done)return n.read().then(r)}))}}})).then((function(){return console.log("Elapsed: ",window.performance.now()-r),m((function(){return{message:"Loading links..."}})),fetch(s("node-ids.txt"),{mode:"cors"}).then((function(e){return e.text()})).then((function(e){var t=e.split("\n");return t.forEach((function(e){return n.addNode(e)})),t}))})).then((function(e){var i,o,r,c;return fetch(s("links.bin"),{mode:"cors"}).then((function(e){return o=e.body.getReader(),o.read().then(u)}));function u(s){if(!t){var d=s.value;if(!d&&r)throw new Error("Incomplete response");if(!d)return m((function(){return{mapLoaded:!0}})),n;if(r){var l=new Uint8Array(r.byteLength+d.byteLength);l.set(new Uint8Array(r),0),l.set(new Uint8Array(d),r.byteLength),d=l,r=null}var h=4*Math.floor(d.byteLength/4);d.byteLength%4!==0&&(r=d.slice(h));for(var f=new DataView(d.buffer),p=0;p<h;p+=4){var v=f.getInt32(p,!0);if(v<0)i=-v-1,c=1,n.addNode(e[i]);else{var g=v-1;n.addLink(e[i],e[g],c),c+=1}}return s.done?(m((function(){return{mapLoaded:!0}})),n):(m(a),o.read().then(u))}}})),o}function s(e){o.fire("element-start",e)}function c(e){o.fire("element-end",e)}}var y=n("d4ec"),x=n("bee2"),C=n("262e"),_=n("2caf"),S=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i;Object(y["a"])(this,n);var o=Object(c["h"])({gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n  uniform float cameraDistance;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity *  (1. - smoothstep(0.0, 1., cameraDistance / (3000. * size)));\n    vPoint = point;\n  }",fragment:"\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([-.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5])},preDrawHook:function(){return"gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);"},postDrawHook:function(){return"gl.disable(gl.DEPTH_TEST);"}});return i=t.call(this,o),i.opacity=1,i.hidden=!1,i}return Object(x["a"])(n,[{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"draw",value:function(e,t){this.hidden||(this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.uniforms.cameraDistance=t.view.position[2],this.program.draw(this.uniforms))}},{key:"clear",value:function(){this.program.setCount(0)}}]),n}(c["d"]),k=(n("0481"),n("4069"),n("5664")),P=n.n(k),E=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,debug:o.debug,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute vec2 point;\n  attribute vec4 color;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(point, -1.0, 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n  }",fragment:"\n  precision highp float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }",attributes:{color:new c["a"]}});return i=t.call(this,r),i.opacity=void 0===o.opacity?1:o.opacity,i.color=o.color||255,i}return Object(x["a"])(n,[{key:"draw",value:function(){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.program.draw(this.uniforms)}},{key:"clear",value:function(){this.program.setCount(0)}},{key:"addPolygon",value:function(e){var t=e.polygon,n=e.color;t=t.flat();for(var i=P()(t),o=0;o<i.length;o++){var r=2*i[o];this.add({point:[t[r],t[r+1]],color:n||this.color})}for(var a=0;a<3;++a)this.add({point:[0,0],color:0})}}]),n}(c["d"]),T=n("b85c"),L=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n),e.getExtension("OES_standard_derivatives"),i=t.call(this,I(e,o));var r=i.msdfImage=new Image;r.crossOrigin="Anonymous",i.isReady=!1,i.queue=[],i.fontSize=o.fontSize||2,i.opacity=void 0!==o.opacity?o.opacity:1,i.fontInfo=null;var a="fonts";return fetch("".concat(a,"/Roboto.json"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i.fontInfo=e,i.alphabet=new Map,e.chars.forEach((function(e){var t=String.fromCharCode(e.id);i.alphabet.set(t,e)})),i.msdfImage.onload=function(){i._sdfTextureChanged=!0,i.program.setTextureCanvas("msdf",i.msdfImage),i.isReady=!0,i.sdfTextureWidth=r.width,i.sdfTextureHeight=r.height,i.queue.forEach((function(e){return i.addText(e)})),i.queue=[]},i.msdfImage.src="".concat(a,"/Roboto0.png")})),i}return Object(x["a"])(n,[{key:"clear",value:function(){this.program.setCount(0)}},{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,color:[.9,.9,.9,1],bias:.5,opacity:this.opacity}),this.uniforms.cameraDistance=t.view.position[2],this.uniforms.opacity=this.opacity,this.uniforms.color[0]=.2,this.uniforms.color[1]=.4,this.uniforms.color[2]=.8,this.uniforms.color[3]=.8,this.uniforms.bias=.35,this.program.draw(this.uniforms),this.uniforms.color[0]=.9,this.uniforms.color[1]=.9,this.uniforms.color[2]=.9,this.uniforms.color[3]=1,this.uniforms.bias=.5,this.program.draw(this.uniforms)}},{key:"addText",value:function(e){if(this.isReady){var t=e.text,n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.z,s=void 0===a?0:a;if(void 0===t)throw new Error("Text is not defined in "+e);var c=0,u=e.fontSize||this.fontSize;if(void 0!==e.limit){var d,l=0,h=Object(T["a"])(t);try{for(h.s();!(d=h.n()).done;){var f=d.value,p=this.alphabet.get(f);p&&(l+=p.xadvance)}}catch(k){h.e(k)}finally{h.f()}u=e.limit*this.fontInfo.info.size/l}var v=u/this.fontInfo.info.size;if(void 0!==e.cx){var m,g=0,w=Object(T["a"])(t);try{for(w.s();!(m=w.n()).done;){var b=m.value,y=this.alphabet.get(b);y&&(g+=y.xadvance)}}catch(k){w.e(k)}finally{w.f()}c-=g*e.cx*v}void 0!==e.cy&&(r+=u*e.cy);var x,C=Object(T["a"])(t);try{for(C.s();!(x=C.n()).done;){var _=x.value,S=this.alphabet.get(_);S?(this.add({position:[i+c,r-S.yoffset*v,s],charSize:[u*S.width/42,-u*S.height/42,u],texturePosition:[S.x/this.sdfTextureWidth,1-S.y/this.sdfTextureHeight,S.width/this.sdfTextureWidth,-S.height/this.sdfTextureHeight]}),c+=S.xadvance*v):console.error(_+" is missing in the font")}}catch(k){C.e(k)}finally{C.f()}this.scene&&this.scene.renderFrame()}else this.queue.push(e)}}]),n}(c["d"]);function I(e,t){return Object(c["h"])({capacity:t.capacity||1,buffer:t.buffer,debug:t.debug,gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform vec4 color;\n  uniform float cameraDistance;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color;\n    vColor[3] *= (1. - smoothstep(0.0, 1., cameraDistance / (5000. * charSize.z)));\n  }",fragment:"\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform float cameraDistance;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }",instanced:{point:new c["e"]([0,0,1,0,1,1,1,1,0,0,0,1])}})}var j=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(y["a"])(this,n),e.getExtension("OES_standard_derivatives"),i=t.call(this,O(e,o));var r=i.msdfImage=new Image;r.crossOrigin="Anonymous",i.isReady=!1,i.queue=[],i.fontSize=o.fontSize||2,i.opacity=void 0!==o.opacity?o.opacity:1,i.fontInfo=null;var a="fonts";return fetch("".concat(a,"/Roboto.json"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){i.fontInfo=e,i.alphabet=new Map,e.chars.forEach((function(e){var t=String.fromCharCode(e.id);i.alphabet.set(t,e)})),i.msdfImage.onload=function(){i._sdfTextureChanged=!0,i.program.setTextureCanvas("msdf",i.msdfImage),i.isReady=!0,i.sdfTextureWidth=r.width,i.sdfTextureHeight=r.height,i.queue.forEach((function(e){return i.addText(e)})),i.queue=[]},i.msdfImage.src="".concat(a,"/Roboto0.png")})),i}return Object(x["a"])(n,[{key:"clear",value:function(){this.program.setCount(0)}},{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,bias:.5,opacity:this.opacity}),this.uniforms.opacity=this.opacity,this.uniforms.cameraDistance=t.view.position[2],this.uniforms.bias=.5,this.program.draw(this.uniforms)}},{key:"addText",value:function(e){if(this.isReady){var t=e.text,n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.z,s=void 0===a?0:a;if(void 0===t)throw new Error("Text is not defined in "+e);var c=0,u=e.fontSize||this.fontSize;if(void 0!==e.limit){var d,l=0,h=Object(T["a"])(t);try{for(h.s();!(d=h.n()).done;){var f=d.value,p=this.alphabet.get(f);p&&(l+=p.xadvance)}}catch(k){h.e(k)}finally{h.f()}u=e.limit*this.fontInfo.info.size/l}var v=u/this.fontInfo.info.size;if(void 0!==e.cx){var m,g=0,w=Object(T["a"])(t);try{for(w.s();!(m=w.n()).done;){var b=m.value,y=this.alphabet.get(b);y&&(g+=y.xadvance)}}catch(k){w.e(k)}finally{w.f()}c-=g*e.cx*v}void 0!==e.cy&&(r+=u*e.cy);var x,C=Object(T["a"])(t);try{for(C.s();!(x=C.n()).done;){var _=x.value,S=this.alphabet.get(_);S?(this.add({position:[i+c,r-S.yoffset*v,s],color:e.color,charSize:[u*S.width/42,-u*S.height/42,u],texturePosition:[S.x/this.sdfTextureWidth,1-S.y/this.sdfTextureHeight,S.width/this.sdfTextureWidth,-S.height/this.sdfTextureHeight]}),c+=S.xadvance*v):console.error(_+" is missing in the font")}}catch(k){C.e(k)}finally{C.f()}this.scene&&this.scene.renderFrame()}else this.queue.push(e)}}]),n}(c["d"]);function O(e,t){return Object(c["h"])({capacity:t.capacity||1,buffer:t.buffer,debug:t.debug,gl:e,vertex:"\n  uniform mat4 modelViewProjection;\n  uniform float cameraDistance;\n\n  attribute vec4 color;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec3 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(\n      position + vec3(vec2(point.x, point.y) * charSize.xy, position.z), 1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n    vColor = color.abgr;\n    vColor[3] = smoothstep(0.2, 0.8, cameraDistance / (50. * charSize.z) );\n  }",fragment:"\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n  varying vec4 vColor;\n\n  uniform float bias;\n  uniform float opacity;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha * opacity);\n  }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([0,0,1,0,1,1,1,1,0,0,0,1])}})}var F=n("bbd6");function N(){var e,t=[],n={addWord:i,find:o};return n;function i(e){t.push(e)}function o(n){return e&&e.cancel(),e=F.goAsync(n,t,{limit:10}),e.then((function(e){return e.map((function(e){return{html:F.highlight(e,"<b>","</b>"),text:e.target}}))}))}}var M,D=n("9cf4"),V=D.instance({},{useSearch:!0}),G={1:"https://anvaka.github.io/map-of-reddit-data/graph.svg",2:"https://anvaka.github.io/map-of-reddit-data/v2/graph.svg",3:"https://anvaka.github.io/map-of-reddit-data/v3/graph.svg"},z=3,A=G[z],R=void 0===V.get("v"),H=void 0!==V.get("graph"),q={query:V.get("q")||"",userTypedSomething:!1,getFilePath:function(){var e=V.get("v");return V.get("graph")||G[e]||A},saveQuery:function(e){if(e){var t={q:e};V.set(t)}else V.unset("q")},getQueryState:function(){return V},getCameraPosition:function(){if(!R||H){var e=["x","y","z"].map((function(e){var t=Number.parseFloat(V.get(e));if(Number.isFinite(t))return t})).filter((function(e){return void 0!==e}));return 3===e.length?e:void 0}},saveScenePosition:function(e){M&&(clearTimeout(M),M=0),M=setTimeout((function(){M=0;var t=e.getDrawContext(),n=Object(a["a"])(t.view.position,3),i=n[0],o=n[1],r=n[2],s={x:i,y:o,z:r};R&&!H&&(s.v=z),V.set(s)}),300)}},B={PRIMARY_HIGHLIGHT_COLOR:3206640383,SECONDARY_HIGHLIGHT_COLOR:3849038591,TERNARY_COLOR:3705462015,TERNARY_LINK:2290649156},Q={Polygons:0,Edges:5,HighlightedEdges:7,Nodes:10,Labels:12,Text:15},U={MainGraph:"main-graph-view"},W=(n("4057"),n("25a5")),Y=n.n(W),$=n("471e"),K=n.n($),Z=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e,i){var o;Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,vertex:"\nuniform mat4 modelViewProjection;\nuniform float width;\n\nattribute vec3 from, to;\nattribute vec2 point;\nattribute vec4 color;\nvarying vec2 vPoint;\nvarying vec4 vColor;\n\nvoid main() {\n  vec2 xBasis = normalize(to - from).xy;\n  vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n  vec4 clip0 = modelViewProjection * vec4(from.xy + width * yBasis * point.x, from.z, 1.0);\n  vec4 clip1 = modelViewProjection * vec4(to.xy + width * yBasis * point.x, to.z, 1.0);\n  gl_Position = mix(clip0, clip1, point.y);\n  vColor = color;\n}",fragment:"\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor.abgr;\n    }",attributes:{color:new c["a"]},instanced:{point:new c["e"]([-.5,0,-.5,1,.5,1,-.5,0,.5,1,.5,0])}});return o=t.call(this,r),o.width=i&&i.width||1,o}return Object(x["a"])(n,[{key:"draw",value:function(){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,width:this.width}),this.uniforms.width=this.width,this.program.draw(this.uniforms)}},{key:"clear",value:function(){this.program.setCount(0)}}]),n}(c["d"]);function X(e,t){var n=new Y.a,i=!1,o=!1,r=8e3,s=e.getScene();s.on("click",x),s.on("mousemove",_),s.on("transform",f);var c=new S(s.getGL()),u=p(s.getDrawContext().view.position[2]),d=new Z(s.getGL(),{width:u}),l=new Z(s.getGL(),{width:u/2});return e.addToLayer(l,Q.Edges),e.addToLayer(d,Q.HighlightedEdges),e.addToLayer(c,Q.Nodes),t.elementsGroupName&&(e.addToNamedGroup(d,t.elementsGroupName),e.addToNamedGroup(l,t.elementsGroupName),e.addToNamedGroup(c,t.elementsGroupName)),{addNode:b,clearHighlights:g,focusUI:w,dispose:y,setPaused:C,getIndex:function(){return n},setViewBox:h};function h(e){r=Math.max(e.width,e.height)}function f(e){if(!o){var n=e.drawContext.view.position[2];d.width=p(n),l.width=d.width/2,i=!0,t&&t.onTransform&&t.onTransform()}}function p(e){var t=e/r,n=6-2*t;return t<0&&(n=5),t>2&&(n=Math.log(t)/Math.log(2)+1),m(n/8)}function m(e){var t=s.getDrawContext(),n=s.getSceneCoordinate(t.width/2,t.height/2-e/2),i=s.getSceneCoordinate(t.width/2,t.height/2+e/2);return Math.abs(n[1]-i[1])}function g(){d.clear(),l.clear(),c.clear()}function w(e){void 0!==e&&v.fire("show-subreddit",e.name);var n=t&&t.getGraph&&t.getGraph();e||i||!n||(g(),v.fire("show-subreddit",null),s.renderFrame()),i=!1,e&&(g(),t.getHighlightedLinks(e).forEach((function(e){var t=e.isFirstLevel?d:l;t.add(e)})),t.getHighlightedNodes(e).forEach((function(e){return c.add(e)})),s.renderFrame())}function b(e){var t=e.position,i=e.size/2;n.insert({minX:t[0]-i,minY:t[1]-i,maxX:t[0]+i,maxY:t[1]+i,ui:e})}function y(){s.removeChild(d),s.removeChild(l),s.removeChild(c),s.off("click",x),s.off("mousemove",_),s.off("transform",f)}function x(e){var t=k(e.x,e.y);w(t)}function C(e){o=e}function _(e){if(!o){var t=k(e.x,e.y);void 0===t?v.fire("show-tooltip",null):v.fire("show-tooltip",{x:e.originalEvent.clientX,y:e.originalEvent.clientY,data:t.name})}}function k(e,t){var i=K()(n,e,t,1),o=i[0];if(void 0!==o){var r=o.ui,s=Object(a["a"])(r.position,2),c=s[0],u=s[1],d=Math.hypot(e-c,t-u);return d<r.size/2?r:void 0}}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:170,i=e>>24&255,o=e>>16&255,r=e>>8&255,s=ee(i,o,r),c=Object(a["a"])(s,3),u=c[0],d=c[1],l=c[2];l>.5&&(t=.8);var h=te(u,d,Math.min(1,l*t)),f=Object(a["a"])(h,3),p=f[0],v=f[1],m=f[2];return p<<24|v<<16|m<<8|n}function ee(e,t,n){e/=255,t/=255,n/=255;var i,o,r=Math.max(e,t,n),a=Math.min(e,t,n),s=(r+a)/2;if(r==a)i=o=0;else{var c=r-a;switch(o=s>.5?c/(2-r-a):c/(r+a),r){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4;break}i/=6}return[i,o,s]}function te(e,t,n){var i,o,r;if(0==t)i=o=r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;i=ne(s,a,e+1/3),o=ne(s,a,e),r=ne(s,a,e-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*r)]}function ne(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var ie=n("2b44"),oe=1450227455,re=J(1450227455),ae={easeInQuart:function(e){return e*e*e*e}};function se(e,t,i,o){var r,a,c=4e3,u=0,d=.1,l=0,h=new Map,f=i.getScene(),p=new S(f.getGL()),g=new L(f.getGL()),w=new E(f.getGL(),{color:306283172,opacity:1}),b=ce(i,12,t);i.addToLayer(w,Q.Polygons),i.addToLayer(p,Q.Nodes),i.addToLayer(g,Q.Text);var y=X(i,{getGraph:function(){return u<c&&e},getHighlightedLinks:_,getHighlightedNodes:C});return v.on("subgraph-focus-node",x),{dispose:k,getPointerEvents:function(){return y},getNameToUI:function(){return h},run:P};function x(e){y.focusUI(h.get(e))}function C(t){var n=Object(s["a"])({},h.get(t.name));n.color=B.PRIMARY_HIGHLIGHT_COLOR;var i=[n];return e.forEachLinkedNode(t.name,(function(e){var t=Object(s["a"])({},h.get(e.id));t.color=B.SECONDARY_HIGHLIGHT_COLOR,i.push(t)})),i}function _(t){var n=[];return e.forEachLink((function(e){var i=e.fromId===t.name||e.toId===t.name;n.push({from:h.get(e.fromId).position,to:h.get(e.toId).position,color:i?4294967295:re,isFirstLevel:i})})),n}function k(e){cancelAnimationFrame(a),v.off("subgraph-focus-node",x),g.parent.removeChild(g),g.dispose(),y.dispose(),b.startSceneRestoration((function(){w.parent.removeChild(w),p.parent.removeChild(p),p.dispose(),e&&e()}),h,o,p,void 0===e),a=null,f.renderFrame()}function P(){b.startFadeOut(),T()}function T(){var t=1/0,n=-1/0;e.forEachNode((function(e){var i=o.get(e.id);if(!i)throw new Error("Missing ui for node: "+e.id);i.size<t&&(t=i.size),i.size>n&&(n=i.size)})),d=.5*n,r=ie(e,{timeStep:n/20,springLength:3*n,springCoefficient:1e-4,gravity:100*-n,nodeMass:function(e){var t=o.get(e);return t.size}}),M(),a=requestAnimationFrame(I)}function I(){for(var e=0;e<10;++e)r.step();var t=N(),n=Math.abs(l-t);l=t,n>d&&u++<c?(a=requestAnimationFrame(I),u%10===0&&m((function(){return{message:"Layout step ".concat(u," of ").concat(c,". Please wait...")}}))):O(),f.setViewBox(F()),f.renderFrame()}function j(){var t=null;if(e.forEachNode((function(e){if(e.data&&e.data.isRoot)return t=e.id,!0})),!t)throw new Error("Root node is missing in the subgraph");return t}function O(){var t=[];e.forEachNode((function(e){var n=r.getNodePosition(e.id),i=n.x,o=n.y;t.push([i,o]);var a=h.get(e.id);y.addNode(a),g.addText({x:i,y:o-.75*a.size,text:a.name,limit:2*a.size,cx:.5})}));var i=j();y.focusUI(h.get(i)),m((function(){return{subgraphDone:!0,subgraphName:i}})),n.e("chunk-9475eac2").then(n.t.bind(null,"a230",7)).then((function(e){var n=e.default(t);w.addPolygon({polygon:n,color:oe}),f.renderFrame()}))}function F(){var t={left:1/0,right:-1/0,top:1/0,bottom:-1/0};return e.forEachNode((function(e){var n=r.getNodePosition(e.id),i=n.x,o=n.y;i<t.left&&(t.left=i),i>t.right&&(t.right=i),o<t.top&&(t.top=o),o>t.bottom&&(t.bottom=o)})),t}function N(){var t=1/0,n=-1/0,i=1/0,o=-1/0;e.forEachNode((function(e){var a=r.getNodePosition(e.id),s=h.get(e.id);s.position[0]=a.x,s.position[1]=a.y,a.x<t&&(t=a.x),a.x>n&&(n=a.x),a.y<i&&(i=a.y),a.y>o&&(o=a.y),p.update(s.id,s)}));var a=n-t,s=o-i;return a*s}function M(){var t=1/0,n=-1/0;e.forEachNode((function(e){var i=o.get(e.id);if(!i)throw new Error("Missing ui for node: "+e.id);var a=ue(i.position),s=B.TERNARY_COLOR,c={position:a,color:s,size:i.size,id:h.size,name:i.name};c.size<t&&(t=c.size),c.size>n&&(n=c.size),h.set(i.name,c),p.add(c),r.setNodePosition(e.id,a[0],a[1])}))}}function ce(e,t,n){var i,o,r,a,s,c,u,d,l=0,h=e.getScene();return{startZoomOut:f,startZoomIn:p,startFadeOut:m,startSceneRestoration:g,dispose:function(){cancelAnimationFrame(i)}};function f(e){l=0,r=v();var t=n.width,c=n.height,u=n.top,d=n.left;a={top:u,left:d,right:d+t,bottom:u+c},o=b,s=function(){m(),e()},cancelAnimationFrame(i),i=requestAnimationFrame(w)}function p(e,t){o=b,l=0,r=v(),a=e,cancelAnimationFrame(i),i=requestAnimationFrame(w),s=null,t&&(s=t)}function v(){var e=h.getDrawContext(),t=e.view.position,n=t[2]*Math.tan(e.fov/2)/e.pixelRatio;return{left:t[0]-n,right:t[0]+n,top:t[1]-n,bottom:t[1]+n}}function m(){e.getNamedGroup(U.MainGraph).elements.forEach((function(e){e.opacity=0})),e.hideNamedGroup(U.MainGraph)}function g(t,n,r,a,s){if(s)return e.restoreNamedGroup(U.MainGraph),e.getNamedGroup(U.MainGraph).elements.forEach((function(e){e.opacity=1})),void t();l=0,o=x,cancelAnimationFrame(i),i=requestAnimationFrame(w),c=t,d=a,u=[],n.forEach((function(e,t){u.push({ui:e,from:ue(e.position),to:r.get(t).position})}))}function w(){if(l>=t)return l=t,void o(1);i=requestAnimationFrame(w),o(l/t),l+=1}function b(e){if(1===e)return s&&s(),void(s=null);h.setViewBox({top:y(r.top,a.top,e),left:y(r.left,a.left,e),right:y(r.right,a.right,e),bottom:y(r.bottom,a.bottom,e)}),h.renderFrame()}function y(e,t,n){return t*n+e*(1-n)}function x(t){0===t&&e.restoreNamedGroup(U.MainGraph);var n=ae.easeInQuart(t);e.getNamedGroup(U.MainGraph).elements.forEach((function(e){e.opacity=n})),u.forEach((function(e){var n=e.ui;n.position[0]=y(e.from[0],e.to[0],t),n.position[1]=y(e.from[1],e.to[1],t),d.update(n.id,n)})),e.getScene().renderFrame(),1===t&&c&&c()}}function ue(e){return[e[0],e[1],e[2]]}function de(e){var t=new Map;return{addToLayer:r,addToNamedGroup:i,hideNamedGroup:o,restoreNamedGroup:n,getNamedGroup:function(e){return t.get(e)},getScene:function(){return e}};function n(e){var n=t.get(e);if(void 0===n)throw new Error("No such group: "+e);n.isHidden&&(n.isHidden=!1,n.elements.forEach((function(e){r(e,e.layer)})))}function i(e,n){var i=t.get(n);void 0===i&&(i={elements:[],isHidden:!1},t.set(n,i)),i.elements.push(e)}function o(e){var n=t.get(e);if(!n)throw new Error("No group with such name: "+e);n.isHidden||(n.isHidden=!0,n.elements.forEach((function(e){e.parent&&e.parent.removeChild(e)})))}function r(t,n){t.layer=n;var i=e.getRoot(),o=null;i.children.forEach((function(e){var t=e.layer;void 0===t&&(console.warn("Scene element without layer index",t),t=0),t<=n&&(o=e)})),o?i.insertChildAfter(t,o):i.appendChild(t,!0)}}n("4e82"),n("9129");var le=[[0,0],[1,0],[1,1],[1,1],[0,1],[0,0]],he=function(e){Object(C["a"])(n,e);var t=Object(_["a"])(n);function n(e,i){var o;Object(y["a"])(this,n);var r=Object(c["h"])({gl:e,capacity:i.capacity,vertex:"\n  uniform mat4 modelViewProjection;\n  attribute vec3 point;\n  attribute vec2 texCoordinate;\n  attribute vec4 color;\n  varying vec3 vPoint;\n  varying vec2 vTex;\n  varying vec4 vColor;\n\n  void main() {\n    vec4 pos = modelViewProjection * vec4(point, 1.0);\n    gl_Position = pos;\n    vPoint = point;\n    vTex = texCoordinate;\n    vColor = color.abgr;\n  }",fragment:"\n      precision highp float;\n      uniform vec3 camera;\n      varying vec3 vPoint;\n      varying vec2 vTex;\n      varying vec4 vColor;\n\n      void main() {\n        vec4 col = vec4(0);\n        col += length(smoothstep(0.48, 0.5, abs(vTex - 0.5)));\n        col += vColor;\n        col[3] = 0.7;\n        gl_FragColor = col;\n      }",attributes:{color:new c["a"]},preDrawHook:function(){return"\n          // gl.disable(gl.BLEND);\n          gl.enable(gl.DEPTH_TEST);\n          gl.depthFunc(gl.LEQUAL);\n          "},postDrawHook:function(){return"\n          //gl.enable(gl.BLEND);\n           gl.disable(gl.DEPTH_TEST);\n           "}});return o=t.call(this,r),o.uiIDToUI=new Map,o}return Object(x["a"])(n,[{key:"draw",value:function(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,camera:t.view.position}),this.uniforms.opacity=this.opacity,this.program.draw(this.uniforms)}},{key:"setColor",value:function(e,t){this.setFaceColor(e.front,t),this.setFaceColor(e.left,t),this.setFaceColor(e.right,t),this.setFaceColor(e.back,t)}},{key:"setFaceColor",value:function(e,t){var n=this;e.forEach((function(e){e.color=t,n.update(e.uiId,e)}))}},{key:"addBox",value:function(e){var t,n,i,o,r,a=this.getFace(e.width,e.height);this.rotateFace(a,Math.PI/2,"x"),this.translateFace(a,[0,0,e.height/2]),this.rotateFace(a,Math.PI/2,"z"),this.translateFace(a,[e.x+e.width/2,e.y,0]),t=this.addFace(a),t.name="front";var s=this.getFace(e.width,e.height);this.rotateFace(s,Math.PI/2,"x"),this.translateFace(s,[0,0,e.height/2]),this.translateFace(s,[0,-e.width/2,0]),this.translateFace(s,[e.x,e.y,0]),n=this.addFace(s),n.name="left";var c=this.getFace(e.width,e.height);this.rotateFace(c,Math.PI/2,"x"),this.translateFace(c,[0,0,e.height/2]),this.rotateFace(c,Math.PI,"z"),this.translateFace(c,[0,e.width/2,0]),this.translateFace(c,[e.x,e.y,0]),i=this.addFace(c),i.name="right";var u=this.getFace(e.width,e.height);this.rotateFace(u,Math.PI/2,"x"),this.translateFace(u,[0,0,e.height/2]),this.rotateFace(u,-Math.PI/2,"z"),this.translateFace(u,[-e.width/2,0,0]),this.translateFace(u,[e.x,e.y,0]),o=this.addFace(u),o.name="back";var d=this.getFace(e.width,e.width);return this.translateFace(d,[e.x,e.y,e.height]),r=this.addFace(d),{front:t,left:n,right:i,back:o,top:r}}},{key:"removeBox",value:function(e){this.removeFace(e.front),this.removeFace(e.left),this.removeFace(e.right),this.removeFace(e.back)}},{key:"translateFace",value:function(e,t){e.forEach((function(e){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}))}},{key:"rotateFace",value:function(e,t,n){var i=Math.cos(t),o=Math.sin(t);e.forEach((function(e){var t,r,s,c=Object(a["a"])(e,3),u=c[0],d=c[1],l=c[2];if("z"===n)t=i*u-o*d,r=o*u+i*d,s=l;else if("y"===n)t=u*i+l*o,r=d,s=-u*o+l*i;else{if("x"!==n)throw new Error("Not supported axis "+n);t=u,r=d*i-l*o,s=d*o+l*i}e[0]=t,e[1]=r,e[2]=s}))}},{key:"getFace",value:function(e,t){return[[-e/2,-t/2,0],[+e/2,-t/2,0],[+e/2,+t/2,0],[+e/2,+t/2,0],[-e/2,+t/2,0],[-e/2,-t/2,0]]}},{key:"addFace",value:function(e){var t=this;return e.map((function(e,n){var i={point:e,uiId:-1,color:690762751,texCoordinate:le[n]};return i.uiId=t.add(i),t.uiIDToUI.set(i.uiId,i),i}))}},{key:"removeFace",value:function(e){var t=this;e.forEach((function(e){var n=e.uiId,i=t.remove(n),o=t.uiIDToUI.get(i);if(!o)throw new Error("Missing ui element");t.uiIDToUI.delete(i),i!==n&&(o.uiId=n,t.uiIDToUI.set(n,o))}))}},{key:"clear",value:function(){throw new Error("Not implemented")}}]),n}(c["d"]),fe=n("20e7");function pe(e,t,n,i,o){var r,s,u,d,l={enter:_,exit:P,dispose:C,lookAt:x},h=new Set,f=0,p=new Map,g=new Map,b=0,y=new c["b"]({seeThrough:!0});return l;function x(t){var i=n.get(t);if(i){var o=Object(a["a"])(i.position,2),r=o[0],s=o[1],c=i.size||10,u=Math.tan(e.getDrawContext().fov/2),d=e.getCameraController();d.lookAt([r,s-2*c/u,4],[r,s,c])}}function C(){cancelAnimationFrame(d),d=0,clearTimeout(f),e.removeChild(s),e.removeChild(y)}function _(){var n=e.setCameraController(c["i"]);x(i);var a=Math.min(o.width,o.height),d=a/1e5;Number.isFinite(d)||(d=.1),n.setMoveSpeed(d).setScrollSpeed(10*d).setFlySpeed(d/5).enableMouseCapture(!0),r=Object(c["f"])(document.body,n),u=t.all(),s=new he(e.getGL(),{capacity:5*u.length*6}),e.appendChild(s),e.appendChild(y),S(i),I()}function S(e){var i=n.get(e);if(i){var o=Object(a["a"])(i.position,2),r=o[0],c=o[1],u=K()(t,r,c,60);u.forEach((function(e){var t=e.ui,n=Object(a["a"])(t.position,2),i=n[0],o=n[1],r=s.addBox({x:i,y:o,width:t.size,height:2*t.size});p.set(t,r)})),k()}}function k(){var t=0;function n(){var i=0;while(t<u.length&&i<1e3){var o=u[t],r=o.ui;if(t+=1,!p.has(r)){var c=Object(a["a"])(r.position,2),l=c[0],h=c[1],f=s.addBox({x:l,y:h,width:r.size,height:2*r.size});p.set(r,f),i+=1}}e.renderFrame(),t<u.length?(m((function(){return{message:"Initializing street view: "+w(t)+"/"+w(u.length)}})),d=requestAnimationFrame(n)):(m((function(){return{streetViewDone:!0}})),e.on("transform",L),d=0)}d=requestAnimationFrame(n)}function P(){g.forEach((function(e,t){return T(t)})),r.dispose(),e.off("transform",L),e.setCameraController(c["k"]),e.removeChild(s)}function E(e,t){var n=g.get(t);if(!n||e!==n.face){n&&n.face&&y.removeChild(n.dom);var i=e[0].point,o=e[1].point,r=e[2].point,a=o[0]-i[0],s=o[1]-i[1],u=Math.sqrt(a*a+s*s),d=new c["c"]({width:"400px",height:"800px"}),l=u/400,h=(i[0]+o[0])/2,f=(i[1]+o[1])/2,p=(i[2]+r[2])/2,m=fe["c"].cross([],[o[0]-i[0],o[1]-i[1],o[2]-i[2]],[r[0]-i[0],r[1]-i[1],r[2]-i[2]]);ve(m,m);var w=fe["b"].rotationTo([],[0,0,1],m);"back"===e.name?fe["b"].rotateZ(w,w,-Math.PI/2):"front"===e.name?fe["b"].rotateZ(w,w,Math.PI/2):"right"===e.name&&fe["b"].rotateZ(w,w,Math.PI),fe["a"].fromRotationTranslationScale(d.model,w,[h,f,p],[l,l,l]),d.worldTransformNeedsUpdate=!0,v.fire("append-dom",{name:t,dom:d.el}),y.appendChild(d),g.set(t,{face:e,dom:d})}}function T(e){var t=g.get(e);t&&(v.fire("remove-dom",{name:e,dom:t.dom.el}),y.removeChild(t.dom),g.delete(e))}function L(e){var t=e.drawContext,n=t.view.position[2];n<10&&(t.view.position[2]=10,e.updated=!0),I()}function I(){clearTimeout(f);var e=window.performance.now(),t=e-b;t<500?f=setTimeout(j,t):j()}function j(){b=window.performance.now();var t=e.getDrawContext(),n=t.view.position,i=t.view.center,o=O(n,i),r=F(n,o,10,35);if(r=r.map((function(e){var t=e.ui.position[0]-n[0],i=e.ui.position[1]-n[1],o=t*t+i*i;return{ui:e.ui,size:e.ui.size,dist:o}})).sort((function(e,t){return t.size/t.dist-e.size/e.dist})).slice(0,4),r.length){var s=new Set;r.forEach((function(e){p.has(e.ui)&&s.add(e.ui)})),h.forEach((function(e){s.has(e)||T(e.name)}));var c=[];s.forEach((function(e){var t=p.get(e);if(!t)throw new Error("missing ui");var n=1/0,i=t.front;n=l(t,t.front);var o=l(t,t.back);o<n&&(n=o,i=t.back),o=l(t,t.left),o<n&&(n=o,i=t.left),o=l(t,t.right),o<n&&(n=o,i=t.right),Number.isFinite(n)&&c.push({t:n,face:i,name:e.name})})),h=s,c.sort((function(e,t){return e.t-t.t}));for(var u=Math.min(10,c.length),d=0;d<u;++d)E(c[d].face,c[d].name);e.renderFrame()}function l(e,t){var i=t[0].point,o=t[1].point;return f(n,i,o)}function f(e,t,n){var i=Object(a["a"])(e,2),o=i[0],r=i[1],s=Object(a["a"])(t,2),c=s[0],u=s[1],d=n[0]-t[0],l=n[1]-t[1],h=c+.5*d,f=u+.5*l,p=O(e,[h,f]),v=Object(a["a"])(p,2),m=v[0],g=v[1],w=(m*(u-r)+g*(o-c))/(d*g-l*m),b=(c+d*w-o)/m;return Number.isNaN(b)?0:(b<0&&(b=1/0),b)}}function O(e,t){var n=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(!(i<.001))return n[0]/=i,n[1]/=i,n}function F(e,n,i,o){return n?K()(t,e[0],e[1],i,r):[];function r(t){var i=(t.minX+t.maxX)/2,r=(t.minY+t.maxY)/2,a=O(e,[i,r]);if(!a)return!1;var s=n[0]*a[0]+n[1]*a[1],c=Math.acos(s);return c<o*Math.PI/180}}}function ve(e,t){var n=t[0],i=t[1],o=t[2],r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function me(e){var t,n,i,o=!1,r=!1,u=ve(),d=N();window.fuzzySearcher=d;var l,p,y,x=q.query,C=new S(u.getGL()),_=new E(u.getGL(),{color:306283172,opacity:1}),k=new L(u.getGL()),P=new j(u.getGL()),T=ge(),I=[],O=new Map,F=new Map,M=new Map,D=new Map,V=g(m,100,window),G=de(u);G.addToLayer(_,Q.Polygons),G.addToLayer(C,Q.Nodes),G.addToLayer(k,Q.Text),G.addToLayer(P,Q.Labels),G.addToNamedGroup(_,U.MainGraph),G.addToNamedGroup(C,U.MainGraph),G.addToNamedGroup(k,U.MainGraph),G.addToNamedGroup(P,U.MainGraph);var z=X(G,{elementsGroupName:U.MainGraph,onTransform:function(){y||q.saveScenePosition(u)},getGraph:function(){return l&&l.getGraph()},getHighlightedNodes:A,getHighlightedLinks:R});return v.on("focus-node",te),v.on("unfocus",ne),v.on("exit-subgraph",ie),{loadSVG:oe,focus:function(){e.focus()},isStreetViewMode:function(){return r},dispose:ee,showRelated:Z,showStreetView:H,exitStreetView:W,getNeighbors:K,getGraph:$,getScene:function(){return u}};function A(e){var t=l&&l.getGraph();if(!t)return[];var n=F.get(e.componentId),i=Object(s["a"])({},O.get(e.name));i.color=B.PRIMARY_HIGHLIGHT_COLOR;var o=[i];return t.forEachLinkedNode(e.name,(function(e){var t=Object(s["a"])({},O.get(e.id));t.color=B.SECONDARY_HIGHLIGHT_COLOR,o.push(t),n.has(e.id)})),o}function R(e){var t=l&&l.getGraph();if(!t)return[];var n,i=10,o=F.get(e.componentId),r=M.get(e.componentId),a=[];return o.forEach((function(s){n=0,t.forEachLinkedNode(s,(function(t){if(o.has(t.id)){var c=s===e.name||t.id===e.name;n>i&&!c||(a.push({from:O.get(s).position,to:O.get(t.id).position,color:c?4294967295:r,isFirstLevel:c}),n+=1)}}))})),a}function H(e){e=e.split("+").map((function(e){return e.trim()}))[0],r=!0;var n=y?y.getPointerEvents():z;if(!i){var o=y?y.getNameToUI():O;i=pe(u,n.getIndex(),o,e,p)}C.hide(),n.setPaused(!0),t=u.getDrawContext().view.position[2],i.enter()}function W(){C.show(),i.exit(),i.dispose(),i=null,u.getDrawContext().view.position[2]=t,u.getCameraController().setViewBox();var e=y?y.getPointerEvents():z;e.setPaused(!1),r=!1,n&&n.focus()}function Y(e){if(!r){var t=O.get(e);if(!t)return;var n=Object(a["a"])(t.position,2),o=n[0],s=n[1],c=t.size||10;return c*=2,u.setViewBox({left:o-c,top:s-c,right:o+c,bottom:s+c}),t}i.lookAt(e)}function $(){return l.getGraph()}function K(e){var t=l.getGraph(),n=[];return t.forEachLinkedNode(e,(function(e){n.push(e.id)})),n}function Z(e){var t=h()();t.addNode(e,{isRoot:!0});var n=l.getGraph(),i=new Set;function o(e,t){n.forEachLinkedNode(e,(function(e){t.add(e.id)}))}function r(){y=se(t,p,G,O),y.run()}o(e,i),Array.from(i).forEach((function(e){o(e,i)})),i.forEach((function(o){var r=t.getNode(o);if(!r||!r.data){var a=!(!n.hasLink(o,e)&&!n.hasLink(t,o));t.addNode(o,{isFirstChild:a,size:O.get(o).size})}n.forEachLinkedNode(o,(function(n,o){if(i.has(n.id)&&!t.hasLink(o.fromId,o.toId)){var r=o.fromId===e||o.toId===e;t.addLink(o.fromId,o.toId,{isRootLevel:r})}}))})),z.setPaused(!0),y&&(y.dispose(),y=null),r()}function ee(){l&&l.dispose(),v.off("focus-node",te),v.off("unfocus",ne),v.off("exit-subgraph",ie),z.dispose(),u.dispose()}function te(e){var t=Y(e);t&&(y&&(y.dispose((function(){z.setPaused(!1)})),y=null),z.focusUI(t),u.renderFrame(),n&&n.focus())}function ne(){z.clearHighlights(),u.renderFrame()}function ie(){y&&(y.dispose((function(){z.setPaused(!1)})),y=null,n&&n.focus())}function oe(e){l&&l.dispose(),l=b(e).on("element-start",re).on("element-end",ae).load()}function re(e){if("svg"===e.tagName){var t=(e.attributes.get("viewBox")||"0 0 1024 1024").split(" ").map((function(e){return Number.parseFloat(e)})).filter(we);if(4!==t.length)throw new Error("Unknown viewBox definition: "+e.attributes.get("viewBox"));p={left:t[0],top:t[1],width:t[2],height:t[3]},z.setViewBox(p),o||u.setViewBox({left:p.left,top:p.top,right:p.left+p.width,bottom:p.top+p.height})}else if("path"===e.tagName)fe(e);else if("circle"===e.tagName)ue(e);else{var n=e.attributes.get("transform");n&&T.pushTransform(n)}}function ae(e){var t=e.attributes.get("transform");t&&T.popTransform(t),"text"===e.tagName&&e.innerText&&ce(e)}function ce(e){var t=be(e,"font-size"),n=Math.floor(255*(e.attributes.has("fill-opacity")?be(e,"fill-opacity"):.2)),i=0;e.attributes.has("fill")&&(i=xe(Object(f["getElementFillColor"])(e))),i=4294967040&i|n,P.addText({x:be(e,"x"),y:he(be(e,"y")-t),color:i,text:e.innerText,fontSize:t})}function ue(e){var t=be(e,"cx",0),n=he(be(e,"cy",0)),i=be(e,"r"),o=ye(e,"id");if("_"===o[0]&&(o=o.substr(1)),O.has(o))throw new Error("Duplicate node name "+o);var r=ye(e.parent,"id"),a=F.get(r);a||(a=new Set,F.set(r,a)),a.add(o);var s=T.transform(t,n),c={componentId:r,position:s,color:3705462015,size:2*i,id:I.length,name:o};O.set(o,c),I.push(c),z.addNode(c),C.add(c),k.addText({x:s[0],y:s[1]-i,text:o,limit:3.14*i,cx:.5}),d.addWord(o),V(le),u.renderFrame(),x&&o===x&&q.query===x&&!q.userTypedSomething&&v.fire("show-subreddit",o)}function le(){return{message:"Loaded "+w(O.size)+" subreddits..."}}function he(e){return p.height+p.top-e}function fe(e){var t=e.attributes.get("id"),n=me(e),i=n.points,o=n.color;_.addPolygon({polygon:i,color:o});var r=t&&t.substr(1)||"";D.set(r,o),M.set(r,J(o)),u.renderFrame()}function ve(){n=document.querySelector("#events-input");var t=Object(c["g"])(e,{allowPinchRotation:!1,inputTarget:n,near:10,minZoom:50,useDeviceOrientation:!1});t.setClearColor(15/255,15/255,15/255,0);var i=q.getCameraPosition();if(i){var r=t.getDrawContext().view.position;r[0]=i[0],r[1]=i[1],r[2]=i[2],t.getCameraController().setViewBox(),o=!0}else{var a=500;t.setViewBox({left:-a,top:-a,right:a,bottom:a})}return t}function me(e){var t=Object(f["getPointsFromPathData"])(e.attributes.get("d")).map((function(e){var t=Object(a["a"])(e,2),n=t[0],i=t[1],o=T.transform(n,he(i)),r=Object(a["a"])(o,2),s=r[0],c=r[1];return[s,c]})),n=xe(Object(f["getElementFillColor"])(e));return{points:t,color:n}}}function ge(){var e=!1,t=0,n=0,i=[];return{pushTransform:o,popTransform:r,transform:s};function o(t){e=!0,i.push(a(t))}function r(){if(0===i.length)throw new Error("Nothing to pop");i.pop(),e=!0}function a(e){var t=e.match(/matrix\((.+)\)$/i);if(!t)throw new Error("Unknown transformation record: "+e);var n=t[1].split(",").map((function(e){return Number.parseFloat(e)})).filter(we);if(6!==n.length)throw new Error("Only matrix(a,b,c,d,e,f) is supported at the moment");return n}function s(e,i){return c(),[e+t,i-n,0]}function c(){e&&(t=0,n=0,i.forEach((function(e){t+=e[4],n+=e[5]})),e=!1)}}function we(e){return Number.isFinite(e)}function be(e,t,n){var i=Number.parseFloat(e.attributes.get(t));if(!Number.isFinite(i)){if(void 0!==n)return n;throw new Error("Element "+e.tagName+" does not have a finite numeric attribute "+t)}return i}function ye(e,t){return e.attributes.get(t)||""}function xe(e){return e[0]<<24|e[1]<<16|e[2]<<8|255}var Ce,_e=function(){var e=this,t=e._self._c;return t("div",[e._v(" "+e._s(e.data.data)+" ")])},Se=[],ke={props:["data"],data:function(){return{}},methods:{}},Pe=ke,Ee=n("2877"),Te=Object(Ee["a"])(Pe,_e,Se,!1,null,null,null),Le=Te.exports,Ie=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSuggestions,expression:"hideSuggestions"}],staticClass:"ak-typeahead"},[t("a",{staticClass:"menu-opener",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.menuClicked.apply(null,arguments)}}},[t("svg",{staticClass:"feather feather-info",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("line",{attrs:{x1:"12",y1:"16",x2:"12",y2:"12"}}),t("line",{attrs:{x1:"12",y1:"8",x2:"12.01",y2:"8"}})])]),t("input",{ref:"input",attrs:{autofocus:"",type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",placeholder:e.placeholder},domProps:{value:e.currentQuery},on:{input:e.handleInput,keydown:e.cycleTheList}}),e.currentQuery||e.showClearButton?t("a",{staticClass:"search-submit",attrs:{type:"submit",href:"#"},on:{click:function(t){return t.preventDefault(),e.clearSearch.apply(null,arguments)}}},[t("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),t("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])]):e._e(),e.showSuggestions?t("ul",{staticClass:"suggestions"},e._l(e.suggestions,(function(n,i){return t("li",{key:i},[t("a",{staticClass:"suggestion",class:{selected:n.selected},attrs:{href:"#"},domProps:{innerHTML:e._s(n.html)},on:{click:function(t){return t.preventDefault(),e.pickSuggestion(n)}}})])})),0):e._e(),e.showLoading?t("ul",{staticClass:"suggestions"},[t("li",{staticClass:"searching"},[e.loadingError?e._e():t("span",[e._v("Searching...")]),e.loadingError?t("div",{staticClass:"loading-error"},[t("div",[e._v("Failed to get reddit completions:")]),t("pre",[e._v(e._s(e.loadingError))])]):e._e()])]):e._e()])},je=[],Oe=(n("7db0"),n("a434"),[]),Fe="@@clickoutsideContext",Ne=0;function Me(e,t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n&&n.context&&i.target&&o.target&&!e.contains(i.target)&&!e.contains(o.target)&&e!==i.target&&(!n.context.popperElm||!n.context.popperElm.contains(i.target)&&!n.context.popperElm.contains(o.target))){var r=e[Fe].methodName;t.expression&&r&&n.context[r]?n.context[r]():e[Fe].bindingFn&&e[Fe].bindingFn()}}}document.addEventListener("mousedown",(function(e){return Ce=e})),document.addEventListener("mouseup",(function(e){Oe.forEach((function(t){return t[Fe].documentHandler(e,Ce)}))})),document.addEventListener("touchstart",(function(e){Ce=e})),document.addEventListener("touchend",(function(e){Oe.forEach((function(t){return t[Fe].documentHandler(e,Ce)}))}));var De={bind:function(e,t,n){Oe.push(e);var i=Ne++;e[Fe]={id:i,documentHandler:Me(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[Fe].documentHandler=Me(e,t,n),e[Fe].methodName=t.expression,e[Fe].bindingFn=t.value},unbind:function(e){for(var t=Oe.length,n=0;n<t;n++)if(Oe[n][Fe].id===e[Fe].id){Oe.splice(n,1);break}delete e[Fe]}},Ve={directives:{ClickOutside:De},props:{placeholder:{default:"Type here"},showClearButton:{default:!1},query:{default:""},delay:{default:80}},data:function(){return{currentSelected:-1,showSuggestions:!1,showLoading:!1,loadingError:null,suggestions:[],currentQuery:this.query}},watch:{query:function(e){this.currentQuery=e}},methods:{refresh:function(){this.showSuggestions&&this.getSuggestionsInternal()},menuClicked:function(){this.$emit("menuClicked")},hideSuggestions:function(){this.showSuggestions=!1,this.showLoading=!1,this.pendingKeyToShow=!0},showIfNeeded:function(e){this.pendingKeyToShow||(this.showSuggestions=e)},focus:function(){this.$refs.input.focus()},pickSuggestion:function(e){var t=this.currentQuery;if(t.indexOf("+")>-1){var n=t.split("+");n.length>1?(n.pop(),n.push(e.text),this.currentQuery=n.map((function(e){return e.trim()})).join("+")):this.currentQuery=e.text}else this.currentQuery=e.text;this.hideSuggestions(),this.$emit("selected",this.currentQuery)},clearSearch:function(){var e={shouldProceed:!0};this.$emit("beforeClear",e),e.shouldProceed&&(this.currentQuery="",this.getSuggestionsInternal(),this.$emit("cleared"))},handleInput:function(e){this.currentQuery=e.target.value,this.$emit("inputChanged"),this.getSuggestionsInternal()},getSuggestionsInternal:function(){var e=this;e.previous&&(window.clearTimeout(e.previous),e.previous=null),e.currentQuery?e.previous=window.setTimeout((function(){var t=e.currentQuery.split("+"),n=t[t.length-1].trim(),i=window.fuzzySearcher.find(n);if(Array.isArray(i))e.suggestions=i.map((function(e){return{selected:!1,text:e.text,html:e.html}})),e.currentSelected=-1,e.showIfNeeded(i&&i.length>0);else{if(!i)throw new Error("Could not parse suggestions response");e.loadingError=null,i.then((function(t){e.showLoading=!1,t=t||[],e.suggestions=t.map((function(e){return{selected:!1,text:e.text,html:e.html}})),e.currentSelected=-1,e.showIfNeeded(t&&t.length>0)}),(function(t){e.loadingError=t}))}}),e.delay):this.showSuggestions=!1},cycleTheList:function(e){var t,n=this.suggestions,i=this.currentSelected;if(this.pendingKeyToShow=!1,38===e.which)t=-1;else if(40===e.which)t=1;else{if(13===e.which)return n[i]?this.pickSuggestion(n[i]):this.pickSuggestion({text:this.currentQuery}),void e.preventDefault();27===e.which&&this.hideSuggestions()}t&&0!==n.length&&(e.preventDefault(),i>=0&&(this.suggestions[i].selected=!1),i+=t,i<0&&(i=n.length-1),i>=n.length&&(i=0),this.suggestions[i].selected=!0,this.currentSelected=i)}}},Ge=Ve,ze=(n("95bd"),Object(Ee["a"])(Ge,Ie,je,!1,null,null,null)),Ae=ze.exports,Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebar"},[t("div",{staticClass:"row"},[t("h3",[e._v("Map of Reddit")]),t("a",{staticClass:"close-btn",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClose.apply(null,arguments)}}},[t("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),t("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])])]),e._m(0)])},He=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("p",[e._v(" Each dot is a subreddit. Two dots within the same cluster are usually close to each other if multiple users frequently leave comments on both subreddits. ")]),t("p",[e._v(" If you find something missing, please feel free to "),t("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit",target:"_blank"}},[e._v("edit the map")]),e._v(". ")]),t("p",[e._v(" I spent last couple years developing this website as a hobby project. If you enjoy this work please support it "),t("a",{staticClass:"accent",attrs:{href:"https://www.paypal.com/paypalme/anvakos/5"}},[e._v("on Paypal")]),e._v(", "),t("a",{staticClass:"accent",attrs:{href:"https://www.patreon.com/anvaka"}},[e._v("Patreon")]),e._v(" or "),t("a",{staticClass:"accent",attrs:{href:"https://github.com/sponsors/anvaka"}},[e._v("GitHub")]),e._v(" and I promise to not disappoint you with new features :). ")]),t("p",[e._v(" Please follow me on Twitter to stay in touch: "),t("a",{staticClass:"accent",attrs:{href:"https://twitter.com/anvaka"}},[e._v("https://twitter.com/anvaka")]),e._v(". ")]),t("p",[e._v(" Thank you for your interest and support! ")])])}],qe={mounted:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},methods:{onClose:function(){this.$emit("close")},handleKeyDown:function(e){27===e.which&&this.onClose()}}},Be=qe,Qe=Object(Ee["a"])(Be,Re,He,!1,null,null,null),Ue=Qe.exports,We=function(){var e=this,t=e._self._c;return t("div",[t("h3",[e._v("Improve this map")]),t("a",{staticClass:"close-btn",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClose.apply(null,arguments)}}},[t("svg",{staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),t("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])]),t("p",[e._v("The entire website is open source. You can contribute in multiple ways:")]),e._m(0),e._v(" Thank you for your support! "),t("br"),e._v(" ♥️ Anvaka ")])},Ye=[function(){var e=this,t=e._self._c;return t("ul",[t("li",[e._v(" Discuss this product on our own subreddit: "),t("a",{staticClass:"accent",attrs:{href:"https://www.reddit.com/r/MofR/"}},[e._v("/r/MofR")])]),t("li",[e._v("Support this work "),t("a",{staticClass:"accent",attrs:{href:"https://www.patreon.com/anvaka"}},[e._v("on Patreon")]),e._v(" or "),t("a",{staticClass:"accent",attrs:{href:"https://github.com/sponsors/anvaka"}},[e._v("GitHub")]),e._v(". There is a lot of things I'd love to improve about this project, but without your support I wouldn't know if I'm moving in the right direction. ")]),t("li",[e._v(" Add new subreddits or update positions of existing ones if you found an issue. Please follow instructions "),t("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit",target:"_blank"}},[e._v("here")]),e._v(". ")]),t("li",[e._v("If you found a rendering bug - consider reporting it or fixing it "),t("a",{staticClass:"accent",attrs:{href:"https://github.com/anvaka/map-of-reddit",target:"_blank"}},[e._v("here")]),e._v(". ")]),t("li",[e._v(" Share your suggestions and follow me on Twitter. My direct messages are open: "),t("a",{staticClass:"accent",attrs:{href:"https://twitter.com/anvaka"}},[e._v("https://twitter.com/anvaka")])])])}],$e={mounted:function(){window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},methods:{onClose:function(){this.$emit("close")},handleKeyDown:function(e){27===e.which&&this.onClose()}}},Ke=$e,Ze=Object(Ee["a"])(Ke,We,Ye,!1,null,null,null),Xe=Ze.exports,Je=n("8417"),et=n.n(Je),tt=(n("a4d3"),n("e01a"),function(){var e=this,t=e._self._c;return t("a",{staticClass:"small-preview-container",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showFullPreview.apply(null,arguments)}}},[t("div",{staticClass:"header"},[t("span",[e._v("r/"+e._s(e.name))]),e.details?t("span",{staticClass:"subscribers-count"},[e._v(e._s(e.details.subscribers)+" members · "+e._s(e.details.active)+" active")]):e._e()]),e.loading?t("loading-icon"):e._e(),e.details&&e.details.image?t("img",{staticClass:"community-icon",attrs:{src:e.details.image.icon}}):e._e(),e.details?t("div",{staticClass:"info"},[e._v(e._s(e.details.description))]):e._e()],1)}),nt=[],it=function(){var e=this,t=e._self._c;return t("svg",{staticClass:"loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"28",height:"28",fill:"white"}},[t("path",{attrs:{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}}),t("path",{attrs:{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"}})],1)])},ot=[],rt={},at=Object(Ee["a"])(rt,it,ot,!1,null,null,null),st=at.exports,ct={name:"SmallPreview",props:["name"],components:{LoadingIcon:st},data:function(){return{loading:!0,details:null}},watch:{name:function(){this.getSubredditInfo()}},mounted:function(){this.getSubredditInfo()},methods:{showFullPreview:function(){v.fire("show-subreddit",this.name,!0)},getSubredditInfo:function(){var e=this,t=this.name;this.details=null,this.loading=!0,fetch("https://www.reddit.com/r/"+t+"/about.json",{mode:"cors"}).then((function(e){return e.json()})).then((function(n){if(e.name===t){var i=n.data,o=i.public_description,r=i.display_name_prefixed,a=w(i.subscribers),s=w(i.accounts_active);e.loading=!1;var c=null,u=i.icon_img||i.community_icon;if(u){var d=i.banner_img||i.banner_background_image;c={icon:u.split("?")[0],banner:d?d.split("?")[0]:null}}i.over18&&!window.ageConfirmed&&(c=null),e.details={description:o,displayName:r,subscribers:a,active:s,image:c}}}))}}},ut=ct,dt=(n("8155"),Object(Ee["a"])(ut,tt,nt,!1,null,null,null)),lt=dt.exports;function ht(e){window.addEventListener("mousedown",n,!0),window.addEventListener("wheel",n,!0),window.addEventListener("touchstart",n,!0),window.addEventListener("keydown",n,!0);var t=!1;return i;function n(){t||(t=!0,e())}function i(){window.removeEventListener("mousedown",n,!0),window.removeEventListener("wheel",n,!0),window.removeEventListener("touchstart",n,!0),window.removeEventListener("keydown",n,!0)}}var ft=i["a"].extend(et.a),pt=new Map,vt={components:{Tooltip:Le,Typeahead:Ae,Subreddit:et.a,Sidebar:Ue,ImproveWindow:Xe,SmallPreview:lt},name:"app",watch:{multiView:function(e){var t,n=gt(this.subreddit);if(e){var i=this.scene.getNeighbors(n);i.unshift(n),t=i.join("+")}else t=n;this.showSubreddit(t)}},methods:{showRelated:function(){this.scene.showRelated(this.subreddit),this.isSubgraphLayoutInProgress=!0,mt()&&(this.smallPreview=this.subreddit,this.subreddit=null)},showStreetView:function(){this.scene.showStreetView(this.subreddit),this.subreddit=null,this.tooltip=null,this.isStreetViewMode=!0,this.isStreetViewInProgress=!0},onExitStreetView:function(){this.isStreetViewInProgress=!1,this.scene.exitStreetView(),this.isStreetViewMode=!1},findSubreddit:function(e){q.query=e,this.onSubmit()},closeSubredditOnSmallScreen:function(e){q.userTypedSomething=!0,mt()&&this.subreddit&&(e.shouldProceed=!1,this.subreddit=null,this.scene.focus())},onTypeAheadInput:function(){this.typeaheadChanged=!0,q.userTypedSomething=!0},onDeclineAge:function(e){e.preventDefault(),this.closeSubredditViewer()},onBackdropClick:function(){this.sidebarVisible=!1,this.improveVisible=!1},onImproveClick:function(){this.improveVisible=!0},closeSubredditViewer:function(){this.subreddit=null,this.smallPreview=null,q.query="",q.saveQuery(q.query),v.fire("unfocus")},showTooltip:function(e){this.tooltip=e||null},onSubmit:function(){var e=q.query;v.fire("focus-node",gt(e)),e!==q.query&&(q.saveQuery(e),e&&e.indexOf("+")>-1&&(this.subreddit=e)),this.subgraphName=null},onSubgraphRootClick:function(){v.fire("subgraph-focus-node",this.subgraphName)},onExitSubgraph:function(){v.fire("exit-subgraph"),this.subgraphName=null,this.isSubgraphLayoutInProgress=!1},showSubreddit:function(e,t){e!==this.subreddit&&(this.multiView=e&&e.indexOf("+")>-1),this.scene.isStreetViewMode()||(mt()&&!t?this.smallPreview=e:(this.smallPreview=null,this.subreddit=e)),q.query=e,this.tooltip=null,q.saveQuery(q.query)},setProgress:function(e){var t=this;e&&e.mapLoaded?(this.typeaheadChanged||(this.progressMessage=e.error?"Something is likely not right...":"Map is ready to use. Please enjoy"),this.graphLoaded=!0,this.disposeFirstListener=ht((function(){setTimeout((function(){return t.progressMessage=null}),3e3)}))):e&&e.subgraphDone?(this.progressMessage=null,this.subgraphName=e.subgraphName,this.isSubgraphLayoutInProgress=!1):e&&e.streetViewDone?(this.progressMessage=null,this.isStreetViewInProgress=!1):e&&(this.progressMessage=e.message,this.subgraphVisualized=null)},appendDom:function(e){var t=this,n=pt.get(e.name);n&&n.$destroy();var i=document.createElement("div"),o=new ft({propsData:{name:e.name,showFirst:5,sort:this.defaultSort||"hot",time:this.defaultTime||"day"}});o.$on("sortChanged",(function(e){return t.defaultSort=e})),o.$on("timeChanged",(function(e){t.defaultTime=e})),e.dom.appendChild(i);var r=o.$mount(i);pt.set(e.name,r)},removeDom:function(e){var t=pt.get(e.name);t&&(t.$destroy(),pt.delete(e.name))}},data:function(){return{improveVisible:!1,isWebGLEnabled:!1,isStreetViewMode:!1,isSubgraphLayoutInProgress:!1,isStreetViewInProgress:!1,typeaheadChanged:!1,tooltip:null,subgraphName:null,subreddit:null,scene:null,smallPreview:null,sidebarVisible:!1,progressMessage:"",graphLoaded:!1,multiView:!1,streetViewEnabled:!1!==q.getQueryState().get("sv"),defaultSort:"hot",defaultTime:"day",appState:q}},mounted:function(){var e=document.getElementById("cnv");if(pt=new Map,this.isWebGLEnabled=Object(c["j"])(e),this.isWebGLEnabled){var t=me(e);window.getGraph=t.getGraph;var n=q.getFilePath();t.loadSVG(n),this.scene=t,v.on("show-tooltip",this.showTooltip),v.on("show-subreddit",this.showSubreddit),v.on("progress",this.setProgress),v.on("append-dom",this.appendDom),v.on("remove-dom",this.removeDom)}},beforeDestroy:function(){this.scene&&this.scene.dispose(),this.disposeFirstListener&&this.disposeFirstListener(),v.off("show-tooltip",this.showTooltip),v.off("show-subreddit",this.showSubreddit),v.off("progress",this.setProgress),v.off("append-dom",this.appendDom),v.off("remove-dom",this.removeDom)}};function mt(){return window.innerWidth<550}function gt(e){return e&&e.split("+").map((function(e){return e.trim()}))[0]}var wt,bt=vt,yt=(n("d422"),Object(Ee["a"])(bt,o,r,!1,null,null,null)),xt=yt.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(xt)}}).$mount("#app"),null===(wt=document.querySelector(".loading-script"))||void 0===wt||wt.remove()},8155:function(e,t,n){"use strict";n("b8c0")},"95bd":function(e,t,n){"use strict";n("2153")},b8c0:function(e,t,n){},d422:function(e,t,n){"use strict";n("354a")}});
//# sourceMappingURL=app.d2ae4d22.js.map